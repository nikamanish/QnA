<header class="navbar navbar-fixed-top">
	<div class="container">
		<%= link_to "QnA", root_url, id: "logo" %>
		<nav>
			<ul class="nav navbar-nav navbar-right">
				<% if logged_in? %>
					<li class="dropdown">
						<a href="#" class="dropdown-toggle" data-toggle="dropdown">
						Notifications <b class="caret"></b>
						</a>
						<ul class="dropdown-menu">
							<% invi_len = Invitation.joins(:group).select(:id, :group_id, :name).where(accepted: false, receiver_id: current_user.id).length %>
							<% req_len = Request.joins("INNER JOIN memberships ON requests.group_id = memberships.group_id").select(:id, :group_id, :sender_id).where("memberships.user_id = #{current_user.id} AND memberships.admin = true AND requests.granted IS NULL").length %>
							<li><%= link_to "Invitations (#{invi_len})", invitations_show_path %></li>
							<li><%= link_to "Requests (#{req_len})", joins_show_path %></li>
						</ul>
					</li>

					<li class="dropdown">
						<a href="#" class="dropdown-toggle" data-toggle="dropdown">
						Group <b class="caret"></b>
						</a>
						<ul class="dropdown-menu">
							<li><%= link_to "Create Group", new_group_path %></li>
							<li><%= link_to "Join Group", new_join_path %></li>
							<li><%= link_to "Invite People", new_invitation_path %></li>
						</ul>
					</li>

					<li class="dropdown">
						<a href="#" class="dropdown-toggle" data-toggle="dropdown">
						Account <b class="caret"></b>
						</a>
						<ul class="dropdown-menu">
							<li><%= link_to "Profile", current_user %></li>
							<li><%= link_to "Settings", '#' %></li>
							<li class="divider"></li>
							<li>
							<%= link_to "Log out", logout_path, method: "delete" %>
							</li>
						</ul>
					</li>
				<% end %>

			</ul>
		</nav>
	</div>
</header>